{% extends "base.html" %}

{% block title %}Register{% endblock %}

{% block content %}


<div class="auth-container">

    <!-- LEFT PANEL -->
    <div class="auth-left">
        <h1>CRSD</h1>
        <p>Plateforme institutionnelle d‚Äôaide √† la d√©cision</p>
    </div>

    <!-- RIGHT PANEL -->
    <div class="auth-right">
        <!-- üî¥ ICI : auth-box (PAS auth-card) -->
        <div class="auth-box">
            <!-- LOGO -->
            <div class="auth-logo">
                <img src="{{ url_for('static', filename='img/mshp_logo.png') }}"
                    alt="MSHP Logo">
                <p class="auth-logo-text">
                    <h5>Bureau de Strat√©gie de D√©veloppement ‚Äì BSD</h5>
                </p>
            </div>

            <h2>Cr√©er un compte</h2>

            <form method="POST">

                <div class="form-group">
                    <input type="text" name="first_name" placeholder="Nom" required>
                </div>

                <div class="form-group">
                    <input type="text" name="last_name" placeholder="Pr√©nom" required>
                </div>

                <div class="form-group">
                    <input type="email" name="email" placeholder="Email" required>
                </div>

                <div class="form-group">
                    <input type="tel" name="phone" placeholder="T√©l√©phone" required>
                </div>

                <!-- TYPE ACTEUR -->
                <div class="form-group">
                    <select name="actor_type" id="actor_type" required onchange="updateOrganisation()">
                        <option value="">S√©lectionner un type d‚Äôacteur</option>
                        <option value="ETAT">ETAT</option>
                        <option value="PTF">PTF</option>
                    </select>
                </div>

                <!-- ORGANISATION -->
                <div class="form-group">
                    <select name="organisation" id="organisation" required>
                        <option value="">S√©lectionner une organisation</option>
                    </select>
                </div>

                <div class="form-group">
                    <input type="password" name="password" placeholder="Mot de passe" required>
                </div>

                <div class="form-group">
                    <input type="password" name="confirm_password" placeholder="Confirmer le mot de passe" required>
                </div>

                <button type="submit" class="btn-login">
                    Cr√©er un compte
                </button>
            </form>

            <div class="auth-footer">
                Vous avez d√©j√† un compte ?
                <a href="{{ url_for('auth.login') }}">Se connecter</a>
            </div>
        </div>
    </div>
</div>

<!-- JS POUR LES DROPDOWNS -->
<script>
function updateOrganisation() {
    const actorType = document.getElementById("actor_type").value;
    const organisation = document.getElementById("organisation");

    organisation.innerHTML = '<option value="">S√©lectionner une organisation</option>';

    let options = [];

    if (actorType === "ETAT") {
        options = ["MSHP", "BSD", "DNPM", "ANSS"];
    } else if (actorType === "PTF") {
        options = ["OMS", "UNICEF", "UNFPA", "Expertise France", "Banque Mondiale"];
    }

    options.forEach(org => {
        const opt = document.createElement("option");
        opt.value = org;
        opt.textContent = org;
        organisation.appendChild(opt);
    });
}
</script>
{% endblock %}
